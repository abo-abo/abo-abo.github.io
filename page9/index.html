<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      (or emacs &middot; irrelevant)
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/octicons.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Scripts -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="layout-reverse theme-base-08">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <!-- <div class="sidebar-item"> -->
  <!--   <p>unused</p> -->
  <!-- </div> -->

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/archive/">Archive</a>
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    

    <div id="github" class="sidebar-nav-item">
      <button type="button"
              class="btn btn-info"
              data-toggle="collapse"
              data-target="#github-projects">
        <span class="octicon octicon-mark-github"></span> My Emacs Projects
      </button>
      <div id="github-projects" class="collapse">
        <ul style="margin-bottom:0em;">
          <li>
            <a href="https://github.com/abo-abo/lispy">lispy</a>
            <p>vi-like Paredit</p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/worf">worf</a>
            <p>vi-like bindings for org-mode</p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/ace-window">ace-window</a>
            <p>switch windows with <code>ace-jump-mode</code></p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/ace-link">ace-link</a>
            <p>follow links with <code>ace-jump-mode</code></p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/function-args">function-args</a>
            <p>enhance <code>CEDET</code> for C++</p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/helm-make">helm-make</a>
            <p>select a Makefile target with <code>helm</code></p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/make-it-so">make-it-so</a>
            <p>transform files with Makefile recipes</p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/org-download">org-download</a>
            <p>drag-and-drop images to <code>org-mode</code></p>
          </li>
          <li>
            <a href="https://github.com/abo-abo?tab=repositories">
              <span class="octicon octicon-octoface"></span>
              and more
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>

  <div class="sidebar-item">
    <p>
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.0/">
        <img alt="Creative Commons License"
             style="border-width:0;opacity: 0.3;"
             src="https://i.creativecommons.org/l/by-nc-sa/2.0/88x31.png"/>
      </a>
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">(or emacs</a>
            <small>irrelevant)</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/03/19/swiper-on-youtubes/">
        A new Swiper demo on Youtube
      </a>
    </h1>

    <span class="post-date">19 Mar 2015</span>

    <h2 id="youtube-video">Youtube video</h2>

<p>Today, I&#39;ve fixed a few bugs in both <a href="https://github.com/abo-abo/swiper">swiper</a> and <code>ivy</code>.
Finally, the number of candidates display has also been added.  You can see the whole thing in the
<a href="https://www.youtube.com/watch?v=s3qwiAtKjuA">one minute video demo</a>.</p>

<p>Here are the bindings that I&#39;m using:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nv">global-set-key</span> <span class="s">&quot;\C-r&quot;</span> <span class="ss">&#39;swiper</span><span class="p">)</span>
<span class="p">(</span><span class="nv">global-set-key</span> <span class="s">&quot;\C-s&quot;</span> <span class="ss">&#39;swiper</span><span class="p">)</span>
</code></pre></div>
<h2 id="integration-tests">Integration tests</h2>

<p>I&#39;ve also added some <a href="https://github.com/abo-abo/swiper/blob/master/ivy-test.el">integration tests</a>,
if you&#39;re interested. I didn&#39;t know how to do exactly this type of testing before (when there&#39;s input from minibuffer).
Turns out, it&#39;s pretty easy to do using <code>execute-kbd-macro</code>:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;ert</span><span class="p">)</span>

<span class="p">(</span><span class="k">defvar</span> <span class="nv">ivy-expr</span> <span class="no">nil</span>
  <span class="s">&quot;Holds a test expression to evaluate with `ivy-eval&#39;.&quot;</span><span class="p">)</span>

<span class="p">(</span><span class="k">defvar</span> <span class="nv">ivy-result</span> <span class="no">nil</span>
  <span class="s">&quot;Holds the eval result of `ivy-expr&#39; by `ivy-eval&#39;.&quot;</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">ivy-eval</span> <span class="p">()</span>
  <span class="s">&quot;Evaluate `ivy-expr&#39;.&quot;</span>
  <span class="p">(</span><span class="k">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">ivy-result</span> <span class="p">(</span><span class="nf">eval</span> <span class="nv">ivy-expr</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-c e&quot;</span><span class="p">)</span> <span class="ss">&#39;ivy-eval</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">ivy-with</span> <span class="p">(</span><span class="nv">expr</span> <span class="nv">keys</span><span class="p">)</span>
  <span class="s">&quot;Evaluate EXPR followed by KEYS.&quot;</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">ivy-expr</span> <span class="nv">expr</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">execute-kbd-macro</span>
     <span class="p">(</span><span class="nf">vconcat</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-c e&quot;</span><span class="p">)</span>
              <span class="p">(</span><span class="nv">kbd</span> <span class="nv">keys</span><span class="p">)))</span>
    <span class="nv">ivy-result</span><span class="p">))</span>

<span class="p">(</span><span class="nb">ert-deftest</span> <span class="nv">ivy-read</span> <span class="p">()</span>
  <span class="p">(</span><span class="nv">should</span> <span class="p">(</span><span class="nf">equal</span>
           <span class="p">(</span><span class="nv">ivy-read</span> <span class="s">&quot;pattern: &quot;</span> <span class="no">nil</span><span class="p">)</span>
           <span class="no">nil</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">should</span> <span class="p">(</span><span class="nf">equal</span>
           <span class="p">(</span><span class="nv">ivy-read</span> <span class="s">&quot;pattern: &quot;</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;42&quot;</span><span class="p">))</span>
           <span class="s">&quot;42&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">should</span> <span class="p">(</span><span class="nf">equal</span>
           <span class="p">(</span><span class="nv">ivy-with</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">ivy-read</span> <span class="s">&quot;pattern: &quot;</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;blue&quot;</span> <span class="s">&quot;yellow&quot;</span><span class="p">))</span>
                     <span class="s">&quot;C-m&quot;</span><span class="p">)</span>
           <span class="s">&quot;blue&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">should</span> <span class="p">(</span><span class="nf">equal</span>
           <span class="p">(</span><span class="nv">ivy-with</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">ivy-read</span> <span class="s">&quot;pattern: &quot;</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;blue&quot;</span> <span class="s">&quot;yellow&quot;</span><span class="p">))</span>
                     <span class="s">&quot;y C-m&quot;</span><span class="p">)</span>
           <span class="s">&quot;yellow&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">should</span> <span class="p">(</span><span class="nf">equal</span>
           <span class="p">(</span><span class="nv">ivy-with</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">ivy-read</span> <span class="s">&quot;pattern: &quot;</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;blue&quot;</span> <span class="s">&quot;yellow&quot;</span><span class="p">))</span>
                     <span class="s">&quot;y DEL b C-m&quot;</span><span class="p">)</span>
           <span class="s">&quot;blue&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">should</span> <span class="p">(</span><span class="nf">equal</span>
           <span class="p">(</span><span class="nv">ivy-with</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">ivy-read</span> <span class="s">&quot;pattern: &quot;</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;blue&quot;</span> <span class="s">&quot;yellow&quot;</span><span class="p">))</span>
                     <span class="s">&quot;z C-m&quot;</span><span class="p">)</span>
           <span class="no">nil</span><span class="p">)))</span>
</code></pre></div>
<h2 id="outro">Outro</h2>

<p>Give the package a try, if you haven&#39;t yet. You can get it from <a href="http://melpa.org/#/swiper">MELPA</a>.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/03/18/ivy-git/">
        Find file in a Git repo with ivy
      </a>
    </h1>

    <span class="post-date">18 Mar 2015</span>

    <p>I&#39;m really enjoying using <a href="https://github.com/abo-abo/swiper">ivy</a> for matching stuff.</p>

<p>Here is today&#39;s <a href="https://github.com/abo-abo/swiper/blob/master/counsel.el">addition</a>:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">couns-git</span> <span class="p">()</span>
  <span class="s">&quot;Find file in the current Git repository.&quot;</span>
  <span class="p">(</span><span class="k">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">default-directory</span> <span class="p">(</span><span class="nv">locate-dominating-file</span>
                             <span class="nv">default-directory</span> <span class="s">&quot;.git&quot;</span><span class="p">))</span>
         <span class="p">(</span><span class="nv">cands</span> <span class="p">(</span><span class="nv">split-string</span>
                 <span class="p">(</span><span class="nv">shell-command-to-string</span>
                  <span class="s">&quot;git ls-files --full-name --&quot;</span><span class="p">)</span>
                 <span class="s">&quot;\n&quot;</span><span class="p">))</span>
         <span class="p">(</span><span class="nv">file</span> <span class="p">(</span><span class="nv">ivy-read</span> <span class="s">&quot;Find file: &quot;</span> <span class="nv">cands</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">when</span> <span class="nv">file</span>
      <span class="p">(</span><span class="nv">find-file</span> <span class="nv">file</span><span class="p">))))</span>
</code></pre></div>
<p>This one will allow you to find a file in your Git repository.
I&#39;ve bound it like this:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-c f&quot;</span><span class="p">)</span> <span class="ss">&#39;couns-git</span><span class="p">)</span>
</code></pre></div>
<p>Here&#39;s how it looks like for selecting a file in the Emacs repo:</p>

<p><img src="/download/couns-git.png" alt="couns-git.png"></p>

<p>The speed isn&#39;t an issue for 3500 candidates, although I should try to add the number of candidates
display pretty soon. It&#39;s just that there isn&#39;t a good spot in the minibuffer to show that.</p>

<p>I&#39;ve also updated <code>ivy-next-line</code> and <code>ivy-previous-line</code> to switch to the previous history element
in case <code>ivy-text</code> is empty. This is the exact behavior of <code>isearch</code>, so if you bind <code>swiper</code> to <kbd>C-s</kbd>
and <kbd>C-r</kbd> like I do, you&#39;ll find that <kbd>C-s C-s</kbd> and <kbd>C-r C-r</kbd> work as expected.
Thanks to <a href="https://github.com/johnmastro">@johnmastro</a> for the suggestion.</p>

<p>Here&#39;s the current state of the keymap:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="k">defvar</span> <span class="nv">ivy-minibuffer-map</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">map</span> <span class="p">(</span><span class="nf">make-sparse-keymap</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-m&quot;</span><span class="p">)</span> <span class="ss">&#39;ivy-done</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-n&quot;</span><span class="p">)</span> <span class="ss">&#39;ivy-next-line</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-p&quot;</span><span class="p">)</span> <span class="ss">&#39;ivy-previous-line</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-s&quot;</span><span class="p">)</span> <span class="ss">&#39;ivy-next-line</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-r&quot;</span><span class="p">)</span> <span class="ss">&#39;ivy-previous-line</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;SPC&quot;</span><span class="p">)</span> <span class="ss">&#39;self-insert-command</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;DEL&quot;</span><span class="p">)</span> <span class="ss">&#39;ivy-backward-delete-char</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;M-&lt;&quot;</span><span class="p">)</span> <span class="ss">&#39;ivy-beginning-of-buffer</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;M-&gt;&quot;</span><span class="p">)</span> <span class="ss">&#39;ivy-end-of-buffer</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;M-n&quot;</span><span class="p">)</span> <span class="ss">&#39;ivy-next-history-element</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;M-p&quot;</span><span class="p">)</span> <span class="ss">&#39;ivy-previous-history-element</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-g&quot;</span><span class="p">)</span> <span class="ss">&#39;minibuffer-keyboard-quit</span><span class="p">)</span>
    <span class="nv">map</span><span class="p">)</span>
  <span class="s">&quot;Keymap used in the minibuffer.&quot;</span><span class="p">)</span>
</code></pre></div>
<p>You can also try <code>counsel</code> for completing Elisp and <code>couns-clj</code> for completing Clojure.  As you can
see, the implementation is very simple: you just get a list of strings, and you&#39;re done.</p>

<p>If you want to implement some <code>ivy</code> completion for your favorite mode, I recommend to find the
corresponding <code>ac-source</code> and see where it gets its list of strings.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/03/17/more-info/">
        More Info
      </a>
    </h1>

    <span class="post-date">17 Mar 2015</span>

    <p>I really liked Marcin Borkowski&#39;s post on <a href="http://mbork.pl/2014-12-27_Info_dispatch">Info dispatch</a>,
where he describes how to open several <code>*info*</code> buffers for the most commonly used manuals.
However, as I tried to call one of these functions today, I forgot the key binding.</p>

<h2 id="hydra-to-the-rescue!">Hydra to the rescue!</h2>

<p>Here&#39;s what I&#39;ve come up with:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">ora-open-info</span> <span class="p">(</span><span class="nv">topic</span> <span class="nv">bname</span><span class="p">)</span>
  <span class="s">&quot;Open info on TOPIC in BNAME.&quot;</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nf">get-buffer</span> <span class="nv">bname</span><span class="p">)</span>
      <span class="p">(</span><span class="k">progn</span>
        <span class="p">(</span><span class="nv">switch-to-buffer</span> <span class="nv">bname</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">string-match</span> <span class="nv">topic</span> <span class="nv">Info-current-file</span><span class="p">)</span>
          <span class="p">(</span><span class="nv">Info-goto-node</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&quot;(%s)&quot;</span> <span class="nv">topic</span><span class="p">))))</span>
    <span class="p">(</span><span class="nv">info</span> <span class="nv">topic</span> <span class="nv">bname</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">defhydra</span> <span class="nv">hydra-info-to</span> <span class="p">(</span><span class="nb">:hint</span> <span class="no">nil</span> <span class="nb">:color</span> <span class="nv">teal</span><span class="p">)</span>
  <span class="s">&quot;</span>
<span class="s">_o_rg e_l_isp _e_macs _h_yperspec&quot;</span>
  <span class="p">(</span><span class="s">&quot;o&quot;</span> <span class="p">(</span><span class="nv">ora-open-info</span> <span class="s">&quot;org&quot;</span> <span class="s">&quot;*org info*&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="s">&quot;l&quot;</span> <span class="p">(</span><span class="nv">ora-open-info</span> <span class="s">&quot;elisp&quot;</span> <span class="s">&quot;*elisp info*&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="s">&quot;e&quot;</span> <span class="p">(</span><span class="nv">ora-open-info</span> <span class="s">&quot;emacs&quot;</span> <span class="s">&quot;*emacs info*&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="s">&quot;h&quot;</span> <span class="p">(</span><span class="nv">ora-open-info</span> <span class="s">&quot;gcl&quot;</span> <span class="s">&quot;*hyperspec*&quot;</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">define-key</span> <span class="nv">Info-mode-map</span> <span class="s">&quot;t&quot;</span> <span class="ss">&#39;hydra-info-to/body</span><span class="p">)</span>
</code></pre></div>
<h3 id="the-plan">The Plan</h3>

<p>I already have the <kbd>&lt;f1&gt; i</kbd> key binding hard wired to my fingers. So after I&#39;m in
<em>any</em> Info buffer, I plan to press <kbd>t</kbd> and get this dispatch:</p>

<p><img src="/download/hydra-info-dispatch.png" alt="hydra-info-dispatch.png"></p>

<h2 id="getting-the-hyperspec">Getting the Hyperspec</h2>

<p>I&#39;ve heard people lauding HTML while dumping on Info.
I&#39;d suggest them to compare the <a href="http://www.lispworks.com/documentation/HyperSpec/Front/index.htm">Common Lisp Hyperspec</a> web site
to this <a href="http://ftp.gnu.org/gnu/gcl/gcl.info.tgz">info file</a> extracted from there.
Their contents are identical, but it&#39;s easier and more pleasant to use Info.</p>

<p>After I downloaded the file, I extracted it to <code>./etc/info/gcl.info</code>, where <code>.</code> is my <code>emacs-d</code>.
Then I just added this directory to the Info path:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="k">setq</span> <span class="nv">Info-additional-directory-list</span>
      <span class="p">(</span><span class="nf">list</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&quot;etc/info/&quot;</span> <span class="nv">emacs-d</span><span class="p">)))</span>
</code></pre></div>
<h2 id="outro">Outro</h2>

<p>Reading Info is pleasant and educational. In case you&#39;re new to Info, there&#39;s Info for Info. In Info
format! Just press <kbd>&lt;f1&gt; i h</kbd>.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/03/16/try-j/">
        Try J
      </a>
    </h1>

    <span class="post-date">16 Mar 2015</span>

    <h2 id="intro">Intro</h2>

<p>I imagine that if you&#39;re reading this blog, you like to tinker with Emacs.  And people who like to
tinker with stuff probably also like to learn new programming languages, just for fun.  In that
case, if you ever want to learn a non-mainstream language, I highly recommend J.</p>

<p>From its homepage:</p>

<blockquote>
<p>J is a modern, high-level, general-purpose, high-performance programming language. J is portable
and runs on Windows, Unix, Mac, both as a GUI and in a console. J systems can be installed and
distributed for free.</p>
</blockquote>

<h2 id="the-appetizer">The Appetizer</h2>

<p>Things J has going for it that are high on my list:</p>

<ul>
<li><a href="http://www.jsoftware.com/download/j701_b_source.tar.gz">GPL licensed source</a>
(although it&#39;s gibberish to read)</li>
<li>a REPL</li>
<li>short code</li>
<li>high performance</li>
</ul>

<p>What attracted me to J in the first place is that it consistently has the shortest solutions (and
fast-running) on <a href="https://projecteuler.net/">Project Euler</a>.  What kept me going after the initial
wow-effect, was the extremely elegant standard functions implementation dividing things into
<a href="http://www.jsoftware.com/docs/help701/dictionary/partsofspeech.htm">verbs, adverbs, and conjunctions</a>.</p>

<h3 id="something-impressive:-a-sudoku-solver">Something impressive: a Sudoku solver</h3>

<p>This code is taken from the <a href="http://orgmode.org/worg/org-contrib/babel/languages/ob-doc-J.html">ob-J</a> page that I wrote some
time ago (you can find a lot of additional info there):</p>

<pre>
<span class="org-block-begin-line">#+begin_src J :exports both
</span><span class="variable-name">i</span> <span class="j-other">=:</span> <span class="j-verb">,</span>((<span class="j-verb">,|:</span>)<span class="j-verb">i.</span>9 9)<span class="j-verb">,,.</span><span class="j-adverb">/</span><span class="j-verb">,.</span><span class="j-adverb">/</span><span class="j-verb">i.</span>4<span class="j-verb">$</span>3
<span class="variable-name">c</span> <span class="j-other">=:</span> (<span class="j-verb">#=[:#~.</span>)<span class="j-conjunction">@</span><span class="j-verb">-.</span><span class="j-conjunction">&amp;</span>0
<span class="variable-name">t</span> <span class="j-other">=:</span> <span class="j-verb">[:</span>((<span class="j-verb">[:*</span><span class="j-adverb">/</span><span class="j-verb">_9:</span>c<span class="j-adverb">\</span><span class="j-verb">]</span>)<span class="j-conjunction">"</span>1<span class="j-verb">#]</span>)i<span class="j-conjunction">&amp;</span><span class="j-verb">{+</span><span class="j-conjunction">"</span>1 1(<span class="j-verb">&gt;:i.</span>9)<span class="j-verb">*</span><span class="j-adverb">/</span><span class="j-verb">[:</span>i<span class="j-conjunction">&amp;</span><span class="j-verb">=i.</span><span class="j-conjunction">&amp;</span>0
<span class="variable-name">r</span> <span class="j-other">=:</span> <span class="j-verb">[:,</span><span class="j-conjunction">`</span><span class="j-verb">$:</span><span class="j-conjunction">@.</span>(0<span class="j-verb">:e.,</span>)<span class="j-verb">[:;</span>(<span class="j-verb">&lt;</span><span class="j-conjunction">@</span>t)<span class="j-conjunction">"</span>1
<span class="variable-name">s</span> <span class="j-other">=:</span> 9 9<span class="j-conjunction">&amp;</span><span class="j-verb">$</span><span class="j-conjunction">@</span>r<span class="j-conjunction">@</span><span class="j-verb">,</span>
<span class="j-verb">]</span><span class="variable-name">m</span> <span class="j-other">=:</span> 9 9 <span class="j-verb">$".</span><span class="j-conjunction">"</span>0<span class="string">'200370009009200007001004002050000800008000900006000040900100500800007600400089001'</span>
s m
<span class="org-block-end-line">#+end_src
</span>
<span class="org-meta-line">#+RESULTS:</span>
<span class="org-block-begin-line">#+begin_example
</span><span class="org-block">2 0 0 3 7 0 0 0 9
0 0 9 2 0 0 0 0 7
0 0 1 0 0 4 0 0 2
0 5 0 0 0 0 8 0 0
0 0 8 0 0 0 9 0 0
0 0 6 0 0 0 0 4 0
9 0 0 1 0 0 5 0 0
8 0 0 0 0 7 6 0 0
4 0 0 0 8 9 0 0 1

2 8 4 3 7 5 1 6 9
6 3 9 2 1 8 4 5 7
5 7 1 9 6 4 3 8 2
1 5 2 4 9 6 8 7 3
3 4 8 7 5 2 9 1 6
7 9 6 8 3 1 2 4 5
9 6 7 1 4 3 5 2 8
8 1 3 5 2 7 6 9 4
4 2 5 6 8 9 7 3 1
</span><span class="org-block-end-line">#+end_example
</span>
</pre>

<p>It&#39;s pretty amazing that the whole implementation, not counting the example input matrix, takes only
169 characters. You can also see how functional the language is.</p>

<h3 id="something-simpler:-a-factorial">Something simpler: a factorial</h3>

<p>To have a more simple example, here&#39;s how to write down incrementally the factorial of 20:</p>

<pre>
<span class="org-block-begin-line">#+begin_src J
</span><span class="j-verb">i.</span>20
<span class="org-block-end-line">#+end_src
</span>
<span class="org-meta-line">#+RESULTS:</span>
<span class="org-code">: 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19
</span>
<span class="org-block-begin-line">#+begin_src J
</span>1 <span class="j-verb">+</span> <span class="j-verb">i.</span>20
<span class="org-block-end-line">#+end_src
</span>
<span class="org-meta-line">#+RESULTS:</span>
<span class="org-code">: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
</span>
<span class="org-block-begin-line">#+begin_src J
</span><span class="j-verb">*</span><span class="j-adverb">/</span> 1 <span class="j-verb">+</span> <span class="j-verb">i.</span>20
<span class="org-block-end-line">#+end_src
</span>
<span class="org-meta-line">#+RESULTS:</span>
<span class="org-code">: 2432902008176640000
</span>
</pre>

<p>The spaces are optional, I&#39;ve only included them to make the code more clear.</p>

<h3 id="something-visual:-a-sine-plot">Something visual: a sine plot</h3>

<pre>
<span class="org-block-begin-line">#+begin_src J
</span>load <span class="string">'plot'</span>
plot 1 <span class="j-verb">o.</span> 0<span class="j-adverb">.</span>1 <span class="j-verb">*</span> <span class="j-verb">i.</span>200
<span class="org-block-end-line">#+end_src
</span>
</pre>

<p>By simply pressing <kbd>C-c C-c</kbd> on this source block you get this image generated and opened in your browser:</p>

<p><img src="/download/ob-J-sine.png" alt="ob-J-sine.png"></p>

<h2 id="the-emacs-tooling">The Emacs Tooling</h2>

<p>As mentioned above, there&#39;s <code>org-mode</code> babel support for J, including session interaction.  More
importantly, there is <a href="https://github.com/zellio/j-mode">j-mode</a>.  The same package also provides a
REPL via <code>jconsole</code>.</p>

<p>Additionally, I wrote down a learning/assisting tool
<a href="https://github.com/abo-abo/helm-j-cheatsheet">helm-j-cheatsheet</a>.
Here&#39;s one of the screenshots:</p>

<p><img src="https://camo.githubusercontent.com/f3da93fe7c2fb30ffa9b1a4106dd41a6d8ee88a0/68747470733a2f2f7261772e6769746875622e636f6d2f61626f2d61626f2f68656c6d2d6a2d636865617473686565742f6d61737465722f646f632f73637265656e73686f742d322e706e67" alt="helm-j-cheatsheet"></p>

<p>It allows to:</p>

<ul>
<li>insert a function by English name</li>
<li>look up the English name of the function by symbol</li>
<li>open the <a href="http://www.jsoftware.com/docs/help701/dictionary/d010.htm">J documentation</a> for a function</li>
</ul>

<h2 id="outro">Outro</h2>

<p>J is a very cool language to try and I hope you give it a go. I haven&#39;t yet managed to find a nice
use for it, but you could say that, just as learning LISP, learning J can make you better at other
languages.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/03/15/search-with-apropos/">
        Search for things with apropos
      </a>
    </h1>

    <span class="post-date">15 Mar 2015</span>

    <p>Until recently, I didn&#39;t even know that <code>apropos</code> was an actual word. I thought that it was just
some gibberish that Emacs hackers invented to name a command. Turns out, it actually has a very
appropriate meaning:</p>

<blockquote>
<p><strong>apropos</strong></p>

<p><em>preposition</em></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">with reference to; concerning.
</code></pre></div></blockquote>

<h2 id="an-apropos-hydra">An apropos Hydra</h2>

<p>I&#39;ve just added this one to <a href="https://github.com/abo-abo/hydra/blob/master/hydra-examples.el">hydra-examples.el</a>.</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nb">defhydra</span> <span class="nv">hydra-apropos</span> <span class="p">(</span><span class="nb">:color</span> <span class="nv">blue</span>
                         <span class="nb">:hint</span> <span class="no">nil</span><span class="p">)</span>
  <span class="s">&quot;</span>
<span class="s">_a_propos        _c_ommand</span>
<span class="s">_d_ocumentation  _l_ibrary</span>
<span class="s">_v_ariable       _u_ser-option</span>
<span class="s">^ ^          valu_e_&quot;</span>
  <span class="p">(</span><span class="s">&quot;a&quot;</span> <span class="nv">apropos</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&quot;d&quot;</span> <span class="nv">apropos-documentation</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&quot;v&quot;</span> <span class="nv">apropos-variable</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&quot;c&quot;</span> <span class="nv">apropos-command</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&quot;l&quot;</span> <span class="nv">apropos-library</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&quot;u&quot;</span> <span class="nv">apropos-user-option</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&quot;e&quot;</span> <span class="nv">apropos-value</span><span class="p">))</span>
</code></pre></div>
<p>I recommend to bind it like this:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-c h&quot;</span><span class="p">)</span> <span class="ss">&#39;hydra-apropos/body</span><span class="p">)</span>
</code></pre></div>
<p>Customary screenshot:</p>

<p><img src="/download/hydra-apropos.png" alt="hydra-apropos.png"></p>

<p>As you can see, there are a total of 7 apropos functions available.  The most useful ones are
<code>apropos</code>, <code>apropos-command</code> and <code>apropos-variable</code>.  But <code>apropos-value</code> is very interesting as
well: it will not match an object name with the input, but instead search for all objects whose
contents match input. So, for instance, if you see something like <code>&quot;error 42&quot;</code> come up, and you
don&#39;t know where it&#39;s coming from, it&#39;s likely that some variable holds the value <code>42</code>.  And that&#39;s
when you use <code>apropos-variable</code>.</p>

<p>Apropos is like old-school googling, and I find it highly useful in finding the Emacs information
that I need. I hope that you will find it useful as well. Happy hacking!</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page10">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page8">Newer</a>
    
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
