<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="flattr:id" content="9yl9ry">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      (or emacs &middot; irrelevant)
    
  </title>

  <link rel="canonical" href="https://oremacs.com/" />

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/octicons.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Scripts -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="layout-reverse theme-base-08">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <!-- <div class="sidebar-item"> -->
  <!--   <p>unused</p> -->
  <!-- </div> -->

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item active" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/archive/">Archive</a>
        
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="/donate/">Donate</a>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    

    <div id="github" class="sidebar-nav-item">
      <button type="button"
              class="btn btn-info"
              data-toggle="collapse"
              data-target="#github-projects">
        <span class="octicon octicon-mark-github"></span> My Emacs Projects
      </button>
      <div id="github-projects" class="collapse">
        <ul style="margin-bottom:0em;">
          <li>
            <a href="https://github.com/abo-abo/lispy">lispy</a>
            <p>vi-like Paredit</p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/worf">worf</a>
            <p>vi-like bindings for org-mode</p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/ace-window">ace-window</a>
            <p>switch windows with <code>ace-jump-mode</code></p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/ace-link">ace-link</a>
            <p>follow links with <code>ace-jump-mode</code></p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/function-args">function-args</a>
            <p>enhance <code>CEDET</code> for C++</p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/helm-make">helm-make</a>
            <p>select a Makefile target with <code>helm</code></p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/make-it-so">make-it-so</a>
            <p>transform files with Makefile recipes</p>
          </li>
          <li>
            <a href="https://github.com/abo-abo/org-download">org-download</a>
            <p>drag-and-drop images to <code>org-mode</code></p>
          </li>
          <li>
            <a href="https://github.com/abo-abo?tab=repositories">
              <span class="octicon octicon-octoface"></span>
              and more
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>

  <div class="sidebar-item">
    <p>
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
        <img alt="Creative Commons License"
             style="border-width:0;opacity: 0.3;"
             src="https://licensebuttons.net/l/by-sa/4.0/88x31.png"/>
      </a>
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">(or emacs</a>
            <small>irrelevant)</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/12/10/patreon/">
        Comparison of transaction fees on Patreon and similar services
      </a>
    </h1>

    <span class="post-date">10 Dec 2017</span>

    <p>On December 7, Patreon made an announcement about the change in their
transaction fee structure. The results as of December 10 speak for
themselves:</p>

<blockquote>
<p>December 2017 summary: -$29 in pledges, -6 patrons</p>
</blockquote>

<p>All leaving patrons marked &quot;I&#39;m not happy with Patreon&#39;s features or
services.&quot; as the reason for leaving, with quotes ranging from:</p>

<blockquote>
<p>The billing changes are not great.</p>
</blockquote>

<p>to:</p>

<blockquote>
<p>Patreon&#39;s new fees are unacceptable</p>
</blockquote>

<p>In this article, I will explore the currently available methods for
supporting sustainable Free Software development and compare their
transaction fees.</p>

<h2 id="my-experience">My experience</h2>

<p>My experience taking donations is very short. I announced my <a href="http://oremacs.com/2017/10/18/patreon/">fund
raising campaign</a> on
<a href="https://www.patreon.com/abo_abo">Patreon</a> in October 2017.</p>

<p>Here&#39;s what I collected so far, vs the actual money spent by the
contributors:</p>

<ul>
<li>2017-11-01: <code>$140.42 / $162.50 = 86.41%</code></li>
<li>2017-12-01: <code>$163.05 / $187.50 = 86.96%</code></li>
</ul>

<p>The numbers here are using the old Patreon rules that are going away
this month.</p>

<h2 id="real-numbers">Real numbers</h2>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<thead>
<tr>
<th scope="col"><b>method</b></th>
<th scope="col"><b>formula</b></th>
<th scope="col"><b>charged</b></th>
<th scope="col"><b>donated</b></th>
<th scope="col"><b>fee</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>old Patreon</td>
<td>???</td>
<td>$1.00</td>
<td>$0.86</td>
<td>14%</td>
</tr>
<tr style="border-bottom: 2px solid #000;"/>
</tbody>

<tbody>
<tr>
<td>new Patreon</td>
<td>7.9% + $0.35</td>
<td>$1.38</td>
<td>$0.95</td>
<td>31%</td>
</tr>

<tr>
<td>&#xa0;</td>
<td>&#xa0;</td>
<td>$2.41</td>
<td>$1.90</td>
<td>21%</td>
</tr>

<tr>
<td>&#xa0;</td>
<td>&#xa0;</td>
<td>$5.50</td>
<td>$4.75</td>
<td>14%</td>
</tr>
<tr style="border-bottom: 2px solid #000;"/>
</tbody>
<tbody>
<tr>
<td>OpenCollective</td>
<td>12.9% + $0.30</td>
<td>$1.33</td>
<td>$0.90</td>
<td>32%</td>
</tr>

<tr>
<td>&#xa0;</td>
<td>&#xa0;</td>
<td>$2.36</td>
<td>$1.80</td>
<td>24%</td>
</tr>

<tr>
<td>&#xa0;</td>
<td>&#xa0;</td>
<td>$5.45</td>
<td>$4.50</td>
<td>18%</td>
</tr>
<tr style="border-bottom: 2px solid #000;"/>
</tbody>

<tbody>
<tr>
<td>Flattr</td>
<td>16.5%</td>
<td>$1.00</td>
<td>$0.84</td>
<td>17%</td>
</tr>

<tr>
<td>&#xa0;</td>
<td>&#xa0;</td>
<td>$2.00</td>
<td>$1.67</td>
<td>17%</td>
</tr>

<tr>
<td>&#xa0;</td>
<td>&#xa0;</td>
<td>$5.00</td>
<td>$4.18</td>
<td>17%</td>
</tr>
<tr style="border-bottom: 2px solid #000;"/>
</tbody>
<tbody>
<tr>
<td>Liberapay</td>
<td>0.585%</td>
<td>$1.00</td>
<td>$0.99</td>
<td>1%</td>
</tr>
</tbody>
</table>

<h2 id="on-patreon">On Patreon</h2>

<p>Just like everyone else, I&#39;m not happy with the incoming change to the
Patreon fees. But even after the change, it&#39;s still a better deal than
OpenCollective, which is used quite successfully e.g. by
<a href="https://opencollective.com/cider">CIDER</a>.</p>

<p>Just to restate the numbers in the table, if all backers give $1
(which is the majority currently, and I actually would generally
prefer 5 new $1 backers over 1 new $5 backer), with the old system I
get $0.86, while with the new system it&#39;s $0.69. That&#39;s more than 100%
increase in transaction fees.</p>

<h2 id="on-opencollective">On OpenCollective</h2>

<p>It&#39;s more expensive than the new Patreon fees in every category or
scenario.</p>

<h2 id="on-flattr">On Flattr</h2>

<p>Flattr is in the same bucket as Patreon, except with slightly lower
fees currently. Their default plan sounds absolutely ridiculous to me:
you install a browser plug-in so that a for-profit corporation can
track which websites you visit most often in order to distribute the
payments you give them among those websites.</p>

<p>If it were a completely local tool which doesn&#39;t upload any data on
the internet and instead gives you a monthly report to adjust your
donations, it would have been a good enough tool. Maybe with some
adjustments for mind-share bubbles, which result in prominent projects
getting more rewards than they can handle, while small projects fade
away into obscurity without getting a chance. But right now it&#39;s
completely crazy. Still, if you don&#39;t install the plug-in, you can
probably still use Flattr and it will work similarly to Patreon.</p>

<p>I made an <a href="https://flattr.com/@abo-abo">account</a>, just in case, but I
wouldn&#39;t recommend going to Flattr unless you&#39;re already there, or the
first impression it made on me is wrong.</p>

<h2 id="on-paypal">On Paypal</h2>

<p>Paypal is OK in a way, since a lot of the time the organizations like
Patreon are just middle men on top of Paypal. On the other hand,
there&#39;s no way to set up recurring donations. And it&#39;s harder for me
to plan decisions regarding my livelihood if I don&#39;t know at least
approximately the sum I&#39;ll be getting next month.</p>

<p>My account, in case you want to make a lump sum donation:
<a href="https://paypal.me/aboabo">paypal.me/aboabo</a>.</p>

<h2 id="on-bitcoin">On Bitcoin</h2>

<p>Bitcoin is similar to Paypal, except it also:</p>

<ul>
<li>has a very bad impact on the environment,</li>
<li>is a speculative bubble that supports either earning or losing money
without actually providing value to the society.</li>
</ul>

<p>I prefer to stay away from Bitcoin.</p>

<h2 id="summary">Summary</h2>

<p><a href="https://liberapay.com/abo-abo">Liberapay</a> sounds almost too good to
be true. At the same time, their fees are very realistic, you could
almost say optimal, since there are <em>no fees</em> for transfers between
members. So you can spend either €20.64 (via card) or €20.12 (via bank
wire) to charge €20 into your account and give me €1 per month at no
further cost. If you change your mind after one month, you can
withdraw your remaining €19 for free if you use a SEPA (Single Euro
Payments Area) bank.</p>

<p>If I set out today to set up a service similar to Liberapay, even with
my best intentions and the most optimistic expectations, I don&#39;t see
how a better offer could be made. I recommend anyone who wants to
support me to try it out. And, of course, I will report back with real
numbers if anything comes out of it.</p>

<p>Thanks to all my patrons for their former and ongoing support.  At one
point we were at 30% of the monthly goal (25% atm.). This made me very
excited and optimistic about the future. Although I&#39;m doing Free
Software for almost 5 years now, it&#39;s actually 3 years in academia and
2 years in industry. Right now, I&#39;m feeling a burnout looming over the
horizon, and I was really hoping to avoid it by spending less time
working at for-profit corporations. Any help, either monetary or
advice is appreciated. If you&#39;re a part of a Software Engineering or a
Research collective that makes you feel inspired instead of exhausted
in the evening and you have open positions in EU or on remote, have a
look at my <a href="https://www.linkedin.com/in/oleh-krehel/">LinkedIn</a> -
maybe we could become colleagues in the future. I&#39;ll accept
connections from anyone - if you&#39;re reading this blog, we probably
have a lot in common; and it&#39;s always better together.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/11/30/ivy-0.10.0/">
        Ivy 0.10.0 is out
      </a>
    </h1>

    <span class="post-date">30 Nov 2017</span>

    <h2 id="intro">Intro</h2>

<p><a href="https://github.com/abo-abo/swiper">Ivy</a> is a completion method that&#39;s
similar to <code>Ido</code>, but with emphasis on simplicity and customizability.</p>

<h2 id="overview">Overview</h2>

<p>The current release constitutes of 280 commits and 8 months of
progress since <code>0.9.0</code>. Many issues ranging from
<a href="https://github.com/abo-abo/swiper/issues/952">#952</a> to
<a href="https://github.com/abo-abo/swiper/issues/1336">#1336</a> were fixed.
The number of people who contributed code as grown to
<a href="https://github.com/abo-abo/swiper/graphs/contributors">91</a>; thanks,
everyone!</p>

<h2 id="details-on-changes">Details on changes</h2>

<p><code>Changelog.org</code> has been a part of the repository since <code>0.6.0</code>, you
can get the details of the current and past changes:</p>

<ul>
<li>in <a href="https://github.com/abo-abo/swiper/blob/master/doc/Changelog.org#0100">org-mode</a></li>
<li>in <a href="http://oremacs.com/swiper/Changelog#0-10-0">HTML</a></li>
</ul>

<h2 id="highlights">Highlights</h2>

<p>Many improvements are incremental and don&#39;t require any extra code to
enable.  I&#39;ll go over a few selected features that require a bit of
information to make a good use of them.</p>

<h3 id="selectable-prompt">Selectable prompt</h3>

<p>Off by default. You can turn it on like so:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span></span><span class="p">(</span><span class="k">setq</span> <span class="nv">ivy-use-selectable-prompt</span> <span class="no">t</span><span class="p">)</span>
</code></pre></div>
<p>After this, your current input becomes selectable as a
candidate. Press <kbd>C-p</kbd> when you&#39;re on the first candidate to
select your input instead.</p>

<p>This solves the long standing issue of e.g. creating a file or
a directory <code>foo</code> when a file <code>foobar</code> already exists. Previously, the
only solution was to use <kbd>C-M-j</kbd>.  It&#39;s still available, but
now you can also select your input with <kbd>C-p</kbd> and press
<kbd>RET</kbd>.</p>

<h3 id="new-global-actions-for-ivy">New global actions for ivy</h3>

<p><code>ivy-set-actions</code> was used to enable the following bindings:</p>

<ul>
<li>Press <kbd>M-o w</kbd> to copy the current candidate to the kill ring.</li>
<li>Press <kbd>M-o i</kbd> to insert the current candidate into the buffer.</li>
</ul>

<p>These bindings are valid for any completion session by default.</p>

<h3 id="use-c-d-in-ivy-occur-buffers">Use <kbd>C-d</kbd> in ivy-occur buffers</h3>

<p>Here&#39;s an example use-case: search your source code for a variable
name with e.g. <code>counsel-rg</code> and call <code>ivy-occur</code> (<kbd>C-c C-o</kbd>).
Suppose you get 10 results, only 4 of which are interesting.  You can
now delete the uninteresting ones with <kbd>C-d</kbd>. Then maybe
check off the others with <kbd>C-d</kbd> as well as you complete them
one by one. A sort of a TODO list.</p>

<p>Similarly, if you want to go over variables to customize, you can call
<code>counsel-describe-variable</code> with input <code>^counsel-[^-]</code> and then check
off the ones you have already examined with <kbd>C-d</kbd>.</p>

<h3 id="defcustoms-to-play-with">Defcustoms to play with</h3>

<p>Here&#39;s the list of new <code>defcustom</code> or <code>defvar</code> that might be
interesting to review:</p>

<ul>
<li><code>counsel-async-filter-update-time</code></li>
<li><code>counsel-async-ignore-re</code></li>
<li><code>counsel-describe-function-function</code></li>
<li><code>counsel-describe-function-preselect</code></li>
<li><code>counsel-find-file-ignore-regexp</code></li>
<li><code>counsel-fzf-dir-function</code></li>
<li><code>counsel-git-grep-skip-counting-lines</code></li>
<li><code>counsel-git-log-split-string-re</code></li>
<li><code>counsel-url-expansions</code></li>
<li><code>ivy-auto-select-single-candidate</code></li>
<li><code>ivy-magic-slash-non-match-action</code></li>
<li><code>ivy--preferred-re-builders</code></li>
<li><code>ivy-truncate-lines</code></li>
</ul>

<h2 id="new-commands">New Commands</h2>

<p>14 new commands were added by me and many contributors. Here&#39;s the list:</p>

<ul>
<li><code>counsel-ack</code> - completion for <a href="https://beyondgrep.com/">ack</a></li>
<li><code>counsel-apropos</code> - completion for <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Apropos.html">apropos</a></li>
<li><code>counsel-file-register</code> - completion for <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/File-Registers.html">file registers</a></li>
<li><code>counsel-fzf</code> - completion for <a href="https://github.com/junegunn/fzf">fzf</a></li>
<li><code>counsel-git-change-worktree</code> - completion for <a href="https://git-scm.com/docs/git-worktree">git-worktree</a></li>
<li><code>counsel-git-checkout</code> - completion for <a href="https://git-scm.com/docs/git-checkout">git-checkout</a></li>
<li><code>counsel-minibuffer-history</code> - generalization of <code>counsel-expression-history</code> and <code>counsel-shell-command-history</code></li>
<li><code>counsel-org-capture</code> - completion for <a href="http://orgmode.org/manual/Capture.html">org-capture</a></li>
<li><code>counsel-org-file</code> - browse all attachments for the current Org file</li>
<li><code>counsel-org-goto</code> - completion for Org headings</li>
<li><code>counsel-org-goto-all</code> - completion for Org headings in all open buffers</li>
<li><code>counsel-switch-to-shell-buffer</code> - switch to a shell buffer, or create one</li>
<li><code>ivy-occur-delete-candidate</code> - delete current candidate in <code>ivy-occur-mode</code></li>
<li><code>ivy-switch-view</code> - select a <a href="https://oremacs.com/2016/06/27/ivy-push-view/">window configuration</a>, decoupled from <code>ivy-switch-buffer</code></li>
</ul>

<p>My personal favorites are <code>counsel-fzf</code> and <code>counsel-org-file</code>.</p>

<h2 id="outro">Outro</h2>

<p>Again, thanks to all the contributors. Happy hacking!</p>

<p>P.S. Please consider joining my <a href="https://www.patreon.com/abo_abo">74 patrons</a> to give me the opportunity to work on Free Software a lot more. We are currently at 30% of the goal.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/11/18/dired-occur/">
        Save Ivy file completions to Dired
      </a>
    </h1>

    <span class="post-date">18 Nov 2017</span>

    <h2 id="intro">Intro</h2>

<p>I think <code>ivy-occur</code> (<kbd>C-c C-o</kbd>) is one of the coolest
features in <a href="https://github.com/abo-abo/swiper">ivy</a>.  It allows you
to save your current search into a new buffer. This has many uses:</p>

<ul>
<li>get a full overview of all candidates</li>
<li>many useful modal bindings (<kbd>q</kbd>, <kbd>j</kbd>,
<kbd>k</kbd>, <kbd>f</kbd>) and mouse support</li>
<li>ability to manipulate candidates as text</li>
<li>save the search for later, with the option to refresh the search with <kbd>g</kbd></li>
<li>go over candidates as a TODO list, using <kbd>C-d</kbd> to remove elements</li>
</ul>

<p>Everything above works for any <code>ivy-read</code> session. But the most
powerful features come into play when <code>ivy-occur</code> gets customized for
a specific collection.</p>

<h2 id="ivy-occur-for-grep-like-functions"><code>ivy-occur</code> for grep-like functions</h2>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span></span><span class="p">(</span><span class="nv">ivy-set-occur</span> <span class="ss">&#39;swiper</span> <span class="ss">&#39;swiper-occur</span><span class="p">)</span>
</code></pre></div>
<p>Thanks to this default customization, the resulting <code>*ivy-occur
swiper*</code> buffer is in <code>ivy-occur-grep-mode</code> which inherits from
<code>grep-mode</code>. Additionally, you can use
<code>ivy-wgrep-change-to-wgrep-mode</code> <kbd>C-x C-q</kbd> to edit the result
in-place - pressing <kbd>C-x C-s</kbd> will save the changes.</p>

<p>Similar customizations are available for <code>counsel-git-grep</code>,
<code>counsel-ag</code>, <code>counsel-rg</code>, and <code>counsel-grep</code>.</p>

<h2 id="ivy-occur-for-ivy-switch-buffer"><code>ivy-occur</code> for <code>ivy-switch-buffer</code></h2>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span></span><span class="p">(</span><span class="nv">ivy-set-occur</span> <span class="ss">&#39;ivy-switch-buffer</span> <span class="ss">&#39;ivy-switch-buffer-occur</span><span class="p">)</span>
</code></pre></div>
<p>This makes <kbd>C-c C-o</kbd> open your candidates in the powerful
<code>ibuffer</code>, which adds additional info to your buffer list and allows
you to manipulate buffers easily.</p>

<p>For instance, to delete all matching buffers you can do <kbd>C-c C-o
tD</kbd>.</p>

<p>The source code is short enough to be included here:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">ivy-switch-buffer-occur</span> <span class="p">()</span>
  <span class="s">&quot;Occur function for </span><span class="ss">`ivy-switch-buffer&#39;</span><span class="s"> using </span><span class="ss">`ibuffer&#39;</span><span class="s">.&quot;</span>
  <span class="p">(</span><span class="nv">ibuffer</span> <span class="no">nil</span> <span class="p">(</span><span class="nf">buffer-name</span><span class="p">)</span> <span class="p">(</span><span class="nf">list</span> <span class="p">(</span><span class="nf">cons</span> <span class="ss">&#39;name</span> <span class="nv">ivy--old-re</span><span class="p">))))</span>
</code></pre></div>
<p>The interface is quite simple: <code>ivy-occur</code> is responsible for
generating a new buffer, and the occur function
e.g. <code>ivy-switch-buffer-occur</code> is to fill that buffer with useful
info, based on the current search parameters like <code>ivy-text</code> and
<code>ivy--old-re</code>.</p>

<h2 id="ivy-occur-for-counsel-find-file-like-functions"><code>ivy-occur</code> for <code>counsel-find-file</code>-like functions</h2>

<p>This is a brand new feature that works for <code>counsel-find-file</code>,
<code>counsel-git</code>, and <code>counsel-fzf</code> (which itself is quite new, thanks to
<a href="https://github.com/jojojames">@jojojames</a> for contributing it).</p>

<p>Since these functions are used to complete file names, we obviously
want <code>ivy-occur</code> to open a Dired buffer.</p>

<h3 id="example-1">Example 1</h3>

<p>To delete all <code>*.elc</code> files in the current folder do:</p>

<ul>
<li><kbd>C-x C-f</kbd> <code>elc$</code> <kbd>C-c C-o</kbd> <kbd>tDy</kbd>.</li>
</ul>

<h3 id="example-2">Example 2</h3>

<p>To copy all Org files in a Git project to some directory do:</p>

<ul>
<li><kbd>M-x</kbd> <code>counsel-git</code> <code>org$</code> <kbd>C-c C-o</kbd> <kbd>tC</kbd>.</li>
</ul>

<h3 id="example-3">Example 3</h3>

<p>To get a list of videos to watch do:</p>

<ul>
<li><kbd>M-x</kbd> <code>counsel-fzf</code> <code>mp4$</code> <kbd>C-c C-o</kbd>.</li>
</ul>

<p>I can further e.g. mark 3 files with <kbd>m</kbd> and use <kbd>r</kbd>
to send these 3 files to <code>vlc</code> as a list. See <a href="https://oremacs.com/2015/01/04/dired-nohup/">this
post</a> for my dired setup
that makes <kbd>r</kbd> work this way.</p>

<p>You can remove some files afterwards with the usual <kbd>D</kbd> or
<kbd>dx</kbd>. And to redisplay the buffer use <kbd>g</kbd>.</p>

<h2 id="outro">Outro</h2>

<p>I hope you like the new feature. I had a really good few hours
figuring out how it should work exactly.  Please consider joining my
<a href="https://www.patreon.com/abo_abo">72 patrons</a> to give me the
opportunity to work on Free Software a lot more. Happy hacking!</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/10/28/orca/">
        Orca - new package to improve org-capture from browser
      </a>
    </h1>

    <span class="post-date">28 Oct 2017</span>

    <h2 id="intro">Intro</h2>

<p><a href="https://github.com/abo-abo/orca">Orca</a> is a new Emacs package, an
attempt to refactor my old <a href="https://github.com/abo-abo/org-fu">org-fu</a>
into something that&#39;s much more re-usable and easier to get started
with.</p>

<h2 id="orca-functionality">Orca functionality</h2>

<h3 id="problem">Problem:</h3>

<p>When capturing from Firefox using
<a href="http://orgmode.org/worg/org-contrib/org-protocol.html">org-protocol</a> (together with
<a href="https://addons.mozilla.org/en-US/firefox/addon/org-capture/">this addon</a>):</p>

<ul>
<li>either I refile each time I capture, which is slow</li>
<li>or my captures pile up in one place, which is messy</li>
</ul>

<h3 id="solution">Solution:</h3>

<ol>
<li>Define rules for where links from certain websites should be captured.</li>
<li>Allow to capture directly into the current org-mode buffer, since it&#39;s likely related to what I&#39;m working with on.</li>
</ol>

<h3 id="part-1-rules-example">Part 1: Rules example</h3>

<p>Here is my example list of configurations:</p>

<ul>
<li>Capture URL matching <a href="https://www.reddit.com/emacs/">https://www.reddit.com/emacs/</a> to <code>emacs.org:Reddit</code>,</li>
<li>Capture URL matching <a href="https://emacs.stackexchange.com/">https://emacs.stackexchange.com/</a> to <code>emacs.org:Questions</code>,</li>
<li>If nothing else matches, capture to <code>ent.org:Articles</code>.</li>
</ul>

<p>Corresponding code:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span></span><span class="p">(</span><span class="k">setq</span> <span class="nv">orca-handler-list</span>
      <span class="o">&#39;</span><span class="p">((</span><span class="nv">orca-handler-match-url</span>
         <span class="s">&quot;https://www.reddit.com/&quot;</span>
         <span class="s">&quot;~/Dropbox/org/wiki/emacs.org&quot;</span> <span class="s">&quot;Reddit&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">orca-handler-match-url</span>
         <span class="s">&quot;https://emacs.stackexchange.com/&quot;</span>
         <span class="s">&quot;~/Dropbox/org/wiki/emacs.org&quot;</span> <span class="s">&quot;\\* Questions&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">orca-handler-file</span>
         <span class="s">&quot;~/Dropbox/org/ent.org&quot;</span> <span class="s">&quot;\\* Articles&quot;</span><span class="p">)))</span>
</code></pre></div>
<h3 id="part-2-current-buffer-example">Part 2: Current buffer example</h3>

<p>For example, I&#39;m researching how to implement something with
<a href="https://www.docker.com/">docker</a>.  This means that I have
<code>docker.org</code> open, along with dozens of tabs in the browser.</p>

<p>I can configure to capture into the current org-mode buffer with a <code>*
Tasks</code> heading like this:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span></span><span class="p">(</span><span class="nb">push</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">orca-handler-current-buffer</span> <span class="s">&quot;\\* Tasks&quot;</span><span class="p">)</span> <span class="nv">orca-handler-list</span><span class="p">)</span>
</code></pre></div>
<p>Since <code>docker.org</code> has <code>* Tasks</code>, I just click the capture button in
Firefox and follow up with an immediate <kbd>C-c C-c</kbd> in Emacs.
The link is already in the right position, no need for an extra refile
step.</p>

<h2 id="using-customize-with-orca">Using <code>customize</code> with orca</h2>

<p>You can set up the capture rules using <kbd>M-x</kbd>
<code>customize-group</code> <kbd>RET</kbd> <code>orca</code> <kbd>RET</kbd>.</p>

<p>Here&#39;s a screenshot:
<img src="/download/orca-customize.png" alt="orca-customize"></p>

<p>As you see, the customization is a list of an arbitrary length, with
each element falling into one of three categories, each backed by an
Elisp function (<code>orca-handler-current-buffer</code>, <code>orca-handler-file</code>,
and <code>orca-handler-match-url</code>). Each function takes a different number
of arguments (one, two, and three, respectively) - they are all
annotated by the interface.</p>

<p>Here&#39;s the code that describes the expected <code>:type</code> to <code>customize</code>:</p>
<div class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span></span><span class="p">(</span><span class="nb">defcustom</span> <span class="nv">orca-handler-list</span>
  <span class="c1">;; ...</span>
  <span class="nb">:type</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">repeat</span>
          <span class="p">(</span><span class="nv">choice</span>
           <span class="p">(</span><span class="nf">list</span>
            <span class="nb">:tag</span> <span class="s">&quot;Current buffer&quot;</span>
            <span class="p">(</span><span class="nv">const</span> <span class="nv">orca-handler-current-buffer</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">string</span> <span class="nb">:tag</span> <span class="s">&quot;Heading&quot;</span><span class="p">))</span>
           <span class="p">(</span><span class="nf">list</span>
            <span class="nb">:tag</span> <span class="s">&quot;URL matching regex&quot;</span>
            <span class="p">(</span><span class="nv">const</span> <span class="nv">orca-handler-match-url</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">string</span> <span class="nb">:tag</span> <span class="s">&quot;URL&quot;</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">string</span> <span class="nb">:tag</span> <span class="s">&quot;File&quot;</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">string</span> <span class="nb">:tag</span> <span class="s">&quot;Heading&quot;</span><span class="p">))</span>
           <span class="p">(</span><span class="nf">list</span>
            <span class="nb">:tag</span> <span class="s">&quot;Default&quot;</span>
            <span class="p">(</span><span class="nv">const</span> <span class="nv">orca-handler-file</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">string</span> <span class="nb">:tag</span> <span class="s">&quot;File&quot;</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">string</span> <span class="nb">:tag</span> <span class="s">&quot;Heading&quot;</span><span class="p">)))))</span>
</code></pre></div>
<p>You can read more about the customization types in <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Composite-Types.html">this manual section</a>.</p>

<h2 id="outro">Outro</h2>

<p>I hope you enjoy <code>orca</code>. I&#39;ve submitted it to MELPA. Hopefully, it
will be available for an easy install very soon.</p>

<p>Org-mode is a beautiful thing, but my previous attempts to configure
it were huge config files of loosely related (i.e. the only thing in
common was Org-mode) stuff spanning hundreds of lines. Orca is an
improvement in this respect, since it focuses on a very narrow
domain. It still tries to be flexible (just like <code>org-capture</code>) - you
can plug in your own functions into <code>orca-handler-list</code>. But
initially, the flexibility can be constrained into the
<code>customize-group</code> interface, to allow for a self-documenting solution
that&#39;s easy to get started with. Happy hacking!</p>

<p>PS. Thanks to all my patrons for advancing my
<a href="https://oremacs.com/2017/10/18/patreon/">Patreon campaign</a>!
As of this writing, we&#39;re almost at the <a href="https://www.patreon.com/abo_abo">25% mark</a>
with 61 contributors.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/10/18/patreon/">
        Please consider supporting me on Patreon
      </a>
    </h1>

    <span class="post-date">18 Oct 2017</span>

    <p>In light of the recent success of the
<a href="https://www.kickstarter.com/projects/1681258897/its-magit-the-magical-git-client">Magit Kickstarter</a>
(congratulations to <a href="https://magit.vc/">@tarsius</a>, by the way), I got a lot more optimistic about Free Software crowdfunding.</p>

<p>So I opened a Patreon account where you can support my work:
<a href="https://www.patreon.com/abo_abo">https://www.patreon.com/abo_abo</a>.
The goal I set there is both optimistic and (hopefully) realistic: I&#39;d
like to hack on Free Software 1 day per week indefinitely, reducing my
real world job days to 4 per week.</p>

<p>Ideally, I&#39;d like to work on Free Software full time (one can dream),
but it doesn&#39;t look like that level of donations is attainable right
now. But I think I could accomplish a lot working a full day per week:</p>

<ul>
<li>improve the level of maintenance of my current projects</li>
<li>polish and release a few projects I have in a semi-complete unreleased state</li>
<li>produce more content on my <a href="https://www.youtube.com/user/abo5abo/videos">YouTube channel</a></li>
<li>maybe start working on an Emacs book</li>
</ul>

<p>Here&#39;s a list of
<a href="https://github.com/search?q=user:abo-abo+&s=stars&type=Repositories">popular repositories</a>
I&#39;ve made over the last 5 years in my free time (all Free Software under GPL):</p>

<ul>
<li><a href="https://github.com/abo-abo/hydra">hydra</a></li>
<li><a href="https://github.com/abo-abo/swiper">swiper</a></li>
<li><a href="https://github.com/abo-abo/avy">avy</a></li>
<li><a href="https://github.com/abo-abo/lispy">lispy</a></li>
<li><a href="https://github.com/abo-abo/ace-window">ace-window</a></li>
<li><a href="https://github.com/abo-abo/org-download">org-download</a></li>
<li><a href="https://github.com/abo-abo/oremacs">oremacs</a></li>
<li><a href="https://github.com/abo-abo/function-args">function-args</a></li>
<li><a href="https://github.com/abo-abo/auto-yasnippet">auto-yasnippet</a></li>
<li><a href="https://github.com/abo-abo/ace-link">ace-link</a></li>
<li><a href="https://github.com/abo-abo/pamparam">pamparam</a></li>
<li><a href="https://github.com/abo-abo/worf">worf</a></li>
<li><a href="https://github.com/abo-abo/tiny">tiny</a></li>
<li><a href="https://github.com/abo-abo/swiper-helm">swiper-helm</a></li>
<li><a href="https://github.com/abo-abo/define-word">define-word</a></li>
<li><a href="https://github.com/abo-abo/make-it-so">make-it-so</a></li>
<li><a href="https://github.com/abo-abo/lpy">lpy</a></li>
<li><a href="https://github.com/abo-abo/helm-make">helm-make</a></li>
<li><a href="https://github.com/abo-abo/org-fu">org-fu</a></li>
<li><a href="https://github.com/abo-abo/helm-j-cheatsheet">helm-j-cheatsheet</a></li>
<li><a href="https://github.com/abo-abo/zoutline">zoutline</a></li>
<li><a href="https://github.com/abo-abo/plain-org-wiki">plain-org-wiki</a></li>
<li><a href="https://github.com/abo-abo/gtk-pomodoro-indicator">gtk-pomodoro-indicator</a></li>
<li><a href="https://github.com/abo-abo/headlong">headlong</a></li>
<li><a href="https://github.com/abo-abo/elf-mode">elf-mode</a></li>
<li><a href="https://github.com/abo-abo/cook">cook</a></li>
<li><a href="https://github.com/abo-abo/eclipse-theme">eclipse-theme</a></li>
</ul>

<p>If you are a user of my work, don&#39;t feel any pressure to donate. We
are all here voluntarily: I publish because I enjoy it, you use the
software because you find it useful. But out there is the real world,
and, although I like my real world job enough, I can&#39;t say that would
I do it voluntarily if I had enough money to meet my needs.</p>

<blockquote>
<p>If you do what you love, you&#39;ll never work a day in your life</p>
</blockquote>

<p>I&#39;d like to do what I love, and I wish you all the same. Happy hacking!</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
